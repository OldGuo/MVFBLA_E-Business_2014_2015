{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
	<title>Your Cart</title>
{% endblock %}

{% block page_css %}
{% endblock %}

{% block content %}
	<div class="container">
		<div class="row">
			<div class="col-md-3">
				<div class="sidebar inner">
					<h4>Subtotal ({{CartList|length}} Items):</h4>
					<h3 class="price">${{cartListSum|floatformat:2}} USD</h3>
					<a href="/cart/checkout/pShipping" type="button" class="btn btn-primary">Proceed To Checkout</a>
				</div>
				<div class="sidebar inner">
					<h4>Your Purchased Items</h4>
					<div class="list-group">
						{% for item in pendingItems %}
							<div class="list-group-item cart-item">
								<div class="description">
									<h4 class="title">{{item.item.title}}</h4>
									<h6 class="name"><a href="/user/{{item.item.user.username}}">{{item.item.user.first_name}} {{item.item.user.last_name}}</a></h6>
									<h5 class="price">${{item.item.price|floatformat:2}} USD</h5>
									<h6>Quantity: {{item.quantity}}</h6>
									<a href="/cart/shoppingitem/{{item.uniqueid}}/" type="button" class="btn btn-success">Received</button></a>
								</div>
							</div>
						{% endfor %}
					</div>
					<h4>Received Purchases</h4>
					<div class="list-group">
						{% for item in receivedItems %}
							<div class="list-group-item cart-item">
								<div class="description">
									<h4 class="title">{{item.item.title}}</h4>
									<h6 class="name"><a href="/user/{{item.item.user.username}}">{{item.item.user.first_name}} {{item.item.user.last_name}}</a></h6>
									<h5 class="price">${{item.item.price|floatformat:2}} USD</h5>
									<h6>Quantity: {{item.quantity}}</h6>
									<a href="/cart/removeItem/{{item.uniqueid}}/" type="button" class="btn btn-success">Done</button></a>
								</div>
							</div>
						{% endfor %}
					</div>
				</div>
			</div>
			<div class="col-md-6 cart" > 
				<h2>Your Shopping Cart</h2>
				<div class="list-group cart">
					{% for item in CartList %}
						<div class="list-group-item cart-item">
							<div class="imgholder small">
								<div class="img" style="background-image: url('{% if item.item.picture %}{{MEDIA_ROOT}}{{item.item.picture.url}}{% else %}{% static 'files/default-picture.jpg' %}{% endif %}')"/></div>
							</div>
							<div class="description">
								<h3 class="title">{{item.item.title}}</h3>
								<h5 class="name"><a href="/user/{{item.item.user.username}}">{{item.item.user.first_name}} {{item.item.user.last_name}}</a></h5>
								<h4 class="price">${{item.item.price|floatformat:2}} USD</h4>
								<h5>Quantity: {{item.quantity}}</h5>
								<a href="/cart/remove/{{item.uniqueid}}" type="button" class="btn btn-danger">Remove Item</button></a>
							</div>
						</div>
					{% empty %}
						<div>
							<p>You currently have no items in your cart!</p>
						</div>
					{% endfor %}
				</div>
			</div>
			<div class="col-md-3">
				<div class="sidebar inner">
					<h4>Orders From You</h4>
					<div class="list-group">
						{% for item in pendingOrders %}
							<div class="list-group-item cart-item">
								<div class="description">
									<h3 class="title">{{item.item.title}}</h3>
									<h5 class="name"><a href="/user/{{item.item.user.username}}">{{item.user.first_name}} {{item.user.last_name}}</a></h5>
									<h4 class="price">${{item.item.price|floatformat:2}} USD</h4>
									<h5>Quantity: {{item.quantity}}</h5>
									<a href="#" type="button" class="btn btn-success">Sent</button></a>
								</div>
							</div>
						{% endfor %}
					</div>
					<h4>Orders Sent</h4>
					<div class="list-group">
						{% for item in sentOrders %}
							<div class="list-group-item cart-item">
								<div class="description">
									<h3 class="title">{{item.item.title}}</h3>
									<h5 class="name"><a href="/user/{{item.item.user.username}}">{{item.user.first_name}} {{item.user.last_name}}</a></h5>
									<h4 class="price">${{item.item.price|floatformat:2}} USD</h4>
									<h5>Quantity: {{item.quantity}}</h5>
								</div>
							</div>
						{% endfor %}
					</div>
					<h4>Orders Received</h4>
					<div class="list-group">
						{% for item in finishedOrders %}
							<div class="list-group-item cart-item">
								<div class="description">
									<h3 class="title">{{item.item.title}}</h3>
									<h5 class="name"><a href="/user/{{item.item.user.username}}">{{item.user.first_name}} {{item.user.last_name}}</a></h5>
									<h4 class="price">${{item.item.price|floatformat:2}} USD</h4>
									<h5>Quantity: {{item.quantity}}</h5>
									<a href="#" type="button" class="btn btn-success">Done</button></a>
								</div>
							</div>
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
